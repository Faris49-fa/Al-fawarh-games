<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لعبة كرة السلة</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <script>
        var config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        var player;
        var basketball;
        var basket;
        var score = 0;
        var scoreText;
        var timer;
        var timerText;
        var timeLeft = 30;  // الوقت بالثواني
        var gameOver = false;

        var game = new Phaser.Game(config);

        function preload() {
            this.load.image('player', 'https://examples.phaser.io/assets/sprites/phaser-dude.png');
            this.load.image('basketball', 'https://examples.phaser.io/assets/sprites/basketball.png');
            this.load.image('basket', 'https://examples.phaser.io/assets/sprites/basket.png');
        }

        function create() {
            // إنشاء اللاعب
            player = this.physics.add.sprite(100, 500, 'player').setInteractive();
            player.setCollideWorldBounds(true);
            player.setBounce(0.2);
            player.setDrag(0.98);
            player.setVelocity(0, -500);

            // إنشاء الكرة
            basketball = this.physics.add.sprite(400, 300, 'basketball').setInteractive();
            basketball.setCollideWorldBounds(true);
            basketball.setBounce(0.5);

            // إنشاء السلة
            basket = this.physics.add.sprite(700, 150, 'basket').setScale(0.5);

            // تفاعل بين اللاعب والكرة
            this.physics.add.collider(player, basketball);
            this.physics.add.collider(basket, basketball);

            // النصوص
            scoreText = this.add.text(16, 16, 'Score: 0', {
                fontSize: '32px',
                fill: '#000'
            });

            timerText = this.add.text(650, 16, 'Time: 30', {
                fontSize: '32px',
                fill: '#000'
            });

            // البدء في المؤقت
            timer = this.time.addEvent({
                delay: 1000, // كل ثانية
                callback: updateTimer,
                callbackScope: this,
                loop: true
            });
        }

        function update() {
            // تحديث السرعة مع مرور الوقت لزيادة التحدي
            if (!gameOver) {
                if (timeLeft > 0) {
                    basketball.setVelocityX(basketball.body.velocity.x * 1.02); // زيادة السرعة تدريجياً
                }

                // تحريك اللاعب
                if (this.input.activePointer.isDown) {
                    player.x = this.input.x;
                    player.y = this.input.y;
                }

                // تسجيل الهدف
                if (Phaser.Geom.Intersects.RectangleToRectangle(basket.getBounds(), basketball.getBounds())) {
                    score += 10;
                    scoreText.setText('Score: ' + score);
                    basketball.setPosition(400, 300); // إعادة وضع الكرة بعد الهدف
                }
            }
        }

        function updateTimer() {
            if (timeLeft > 0) {
                timeLeft--;
                timerText.setText('Time: ' + timeLeft);
            } else {
                gameOver = true;
                timerText.setText('Game Over!');
            }
        }
    </script>
</body>
</html>
